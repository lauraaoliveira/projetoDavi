CREATE DATABASE projetoOleo;
USE projetoOleo;

-- Tabela empresa
CREATE TABLE empresa (
    id_empresa INT AUTO_INCREMENT PRIMARY KEY,
    nome_fantasia VARCHAR(100) NOT NULL,
    logradouro_empresa VARCHAR(150) NOT NULL,
    telefone_empresa VARCHAR(20),
    email_empresa VARCHAR(150) UNIQUE,
    senha VARCHAR(12) NOT NULL
);

-- Tabela usuarios
CREATE TABLE usuarios (
    id_usuario INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100) NOT NULL,
    logradouro_usuario VARCHAR(150) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE,
    senha VARCHAR(12) NOT NULL,
    qtd_oleo INT,
    solicitado BOOLEAN
);

-- Tabela coletas
CREATE TABLE coletas (
    id_coleta INT AUTO_INCREMENT PRIMARY KEY,
    id_usuario INT NOT NULL,
    id_empresa INT DEFAULT NULL,
    quantidade INT NOT NULL,
    status VARCHAR(50) DEFAULT 'pendente',
    confirmacao_usuario BOOLEAN DEFAULT 0,
    confirmacao_empresa BOOLEAN DEFAULT 0,
    
    FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario)
        ON DELETE CASCADE,

    FOREIGN KEY (id_empresa) REFERENCES empresa(id_empresa)
        ON DELETE CASCADE
);
